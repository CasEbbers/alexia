{% extends 'base_app.html' %}

{% block title %}{% trans 'Availability matrix' %}{% endblock title %}

{% block content %}
<div class="page-header">
    <h2>{% trans 'Availability matrix' %}</h2>
</div>
{% if events %}
<div class="table-responsive">
    <table class="table table-striped table-condensed table-events">
        <thead>
            <tr>
                <th>{% trans 'Bartender' %}</th>
                <th>{% trans 'Tended' %}</th>
                <th>{% trans 'Last tended' %}</th>
                {% for e in events %}
                <th class="diag"><div><span>{{ e.name|truncatechars:25 }}</span></div></th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for t in tenders %}
            <tr>
                <td><a href="{% url 'membership' t.tender.pk %}">{{ t.tender.user.get_full_name }}</a></td>
                <td>{{ t.tended }}</td>
                <td>
                    <span{% if t.last_tended %} title="{{ t.last_tended.name }}"{% endif %}>
                        {% if t.last_tended %}{{ t.last_tended.starts_at|date:"j b Y" }}{% else %}{% trans 'Never' %}{% endif %}
                    </span>
                </td>
                {% for e in t.events %}
                <td>
                    <a href="{% url 'edit-event-bartender-availability' pk=e.event.pk user_pk=t.tender.user.pk %}">
                        <span class="label label-{{ e.availability.css_class|default:'default' }}">{{ e.availability|default:_('Unknown') }}</span>
                    </a>
                </td>
                {% endfor %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<p>{% trans 'No events have been planned.' %}</p>
{% endif %}
{% endblock content %}
